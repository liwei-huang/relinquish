# Gleam

å­¦ä¹  Gleam è¯­è¨€ã€‚

ç¼–å†™æ–‡æ¡£æ—¶ï¼š

- Gleam 0.28.3
- Windows 10

## å‘½ä»¤

| å‘½ä»¤                          | è¯´æ˜           |
| ----------------------------- | -------------- |
| `gleam new <project_name>`    | åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›® |
| `gleam run`                   | è¿è¡Œé¡¹ç›®       |
| `gleam test`                  | æµ‹è¯•é¡¹ç›®       |
| `gleam help`                  | è·å–å¸®åŠ©       |
| `gleam add <deps_name>`       | æ·»åŠ ä¾èµ–       |
| `gleam add <deps_name> --dev` | æ·»åŠ å¼€å‘æ—¶ä¾èµ– |

éœ‘ `gleam run` è¿è¡Œä¸é¡¹ç›®åŒåçš„æ¨¡å—æ–‡ä»¶ï¼ˆ`<project_name>.gleam`ï¼‰ä¸­çš„ä¸»å‡½æ•°ï¼ˆ`main()`ï¼‰ã€‚

éœ‘ `gleam test` è¿è¡Œä¸é¡¹ç›®åŒåå¹¶ä¸”æ·»åŠ åç¼€ `_test` çš„æ¨¡å—æ–‡ä»¶ï¼ˆ`<project_name>_test.gleam`ï¼‰ä¸­çš„ä¸»å‡½æ•°ï¼ˆ`main()`ï¼‰ã€‚

| å‘½ä»¤           | è¯´æ˜         |
| -------------- | ------------ |
| `gleam build`  | æ„å»ºé¡¹ç›®     |
| `gleam check`  | ç±»å‹æ£€æŸ¥     |
| `gleam clean`  | æ¸…é™¤æ„å»ºå·¥ä»¶ |
| `gleam format` | æ ¼å¼åŒ–æºä»£ç  |

## é¢„å¤‡çŸ¥è¯†

ä¸€ã€ä¸»å‡½æ•°

ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œä¸é¡¹ç›®åŒåçš„ `.gleam` æ–‡ä»¶å¿…é¡»æœ‰ä¸»å‡½æ•°ã€‚

```gleam
pub fn main() {}
```

äºŒã€Hello World

ä¸€ä¸ª Hello World ç¨‹åºã€‚

```gleam
import gleam/io

pub fn main() {
    io.println("ä½ å¥½ï¼Œä¸–ç•Œï¼")
}
```

ä¸‰ã€æ³¨é‡Š

éœ‘ï¼š

- è¡Œæ³¨é‡Šï¼Œ`// ...`
- æ–‡æ¡£æ³¨é‡Šï¼Œ`/// ...`
- æ¨¡å—æ³¨é‡Šï¼Œ`//// ...`
- æ²¡æœ‰å—æ³¨é‡Š

å››ã€é£æ ¼

æ¨èä»¥ä¸‹ä»£ç ç¼–å†™é£æ ¼ï¼š

- ç©ºæ ¼ç¼©è¿›ï¼Œå•ä½ç¼©å‡æ˜¯ 2 ä¸ªç©ºæ ¼
- ä¸å†™åˆ†å·ï¼ˆ`;`ï¼‰
- èŠ±æ‹¬å·ï¼ˆ`{}`ï¼‰å¯¹é½ä»£ç ï¼Œè€Œä¸æ˜¯ç¼©è¿›
- èµ·å§‹èŠ±æ‹¬å·ï¼ˆ`{`ï¼‰åº”è¯¥åœ¨åŒä¸€è¡Œ

äº”ã€å‘½å

æ ‡è¯†ç¬¦å‘½åï¼š

- å˜é‡ã€å¸¸é‡ã€å‡½æ•°ï¼Œ`snake_case`
- ç±»å‹ï¼Œ`CamelCase`
- æ²¡æœ‰ `SCREAMING_SNAKE_CASE`

å…­ã€æ‰“å°

éœ€è¦å¯¼å…¥ `gleam/io` æ¨¡å—ä»¥ä½¿ç”¨ä¸‹é¢çš„å‡½æ•°ï¼š

- `print()`ï¼Œåªèƒ½æ‰“å°å­—ç¬¦ä¸²ï¼Œä¸å¸¦æ¢è¡Œ
- `println()`ï¼Œåªèƒ½æ‰“å°å­—ç¬¦ä¸²ï¼Œå¸¦æ¢è¡Œ
- `debug()`ï¼Œèƒ½æ‰“å°å¤§éƒ¨åˆ†ç±»å‹çš„æ•°æ®ï¼Œå¹¶è¿”å›æ•°æ®

ä¸ƒã€è§„é¿

ä»¥ä¸‹åˆ’çº¿ï¼ˆ`_`ï¼‰å¼€å¤´èµ‰å‘½åæ ‡è¯†ç¬¦ï¼Œè§„é¿æœªä½¿ç”¨è­¦å‘Šã€‚

## å˜é‡å’Œå¸¸é‡

### å˜é‡

ä½¿ç”¨ `let` ç»‘å®šå˜é‡ï¼š

- å˜é‡ä¸å¯å˜
- å…è®¸å½±å­å˜é‡

```gleam
let a = 10
io.debug(a) // ç»“æœï¼š10
let a = 20
io.debug(a) // ç»“æœï¼š20
```

### å¸¸é‡

ä½¿ç”¨ `const` ç»‘å®šå¸¸é‡ï¼š

- å¸¸é‡ä¸å¯å˜
- ç¦æ­¢å½±å­å¸¸é‡
- é€šå¸¸å†™ç±»å‹æ³¨è§£
- å¸¸é‡ä¸èƒ½å†™åœ¨å‡½æ•°ä½“å†…ï¼Œè€Œåº”è¯¥å†™åœ¨é¡¶çº§ä½œç”¨åŸŸï¼ˆæ–‡ä»¶æœ€å¤–å±‚ï¼‰

```gleam
pub const my_cookie_can: String = "ğŸª"

pub fn main() {
    io.println(my_cookie_can)
}
```

## è¡¨è¾¾å¼å—

ä»£ç å—å±äºè¡¨è¾¾å¼ï¼Œç§°ä”ºè¡¨è¾¾å¼å—ï¼Œå…¶ä¸­çš„æœ€åä¸€ä¸ªè¡¨è¾¾å¼å³ä”ºæ•´ä¸ªè¡¨è¾¾å¼å—çš„è¿”å›å€¼ã€‚

```gleam
let a = 
    10 * {
        let x = 2
        let y = 4
        x + y
    }
// 60
io.debug(a)
```

## åŸºç¡€ç±»å‹

å‡ ä¸ªå¸¸è§çš„åŸºç¡€ç±»å‹ï¼š

- `Bool`ï¼Œå¸ƒå°”ç±»å‹
- `Int`ï¼Œæ•´æ•°ç±»å‹
- `Float`ï¼Œæµ®ç‚¹æ•°ç±»å‹
- `String`ï¼Œå­—ç¬¦ä¸²ç±»å‹

### å¸ƒå°”ç±»å‹

å€¼æœ‰ `True` å’Œ `False` ãªã€‚

```gleam
let a: Bool = False
```

### æ•´æ•°å’Œæµ®ç‚¹æ•°

æ”¯æŒï¼š

- ä¸‹åˆ’çº¿ï¼ˆ`_`ï¼‰åˆ†å‰²
- æ•´æ•°çš„ä¸åŒè¿›åˆ¶è¡¨ç¤ºæ³•ï¼ŒäºŒè¿›åˆ¶ `0b`ï¼Œå…«è¿›åˆ¶ `0o`ï¼Œåå…­è¿›åˆ¶ `0x`
- æµ®ç‚¹æ•°çš„ç§‘å­¦è®°æ•°æ³•ï¼ˆ`e`ï¼‰

â‘  æ•´æ•°çš„æ“ä½œç¬¦

```txt
+  -  *  /  %
>  <  >=  <=
```

â‘¡ æµ®ç‚¹æ•°çš„æ“ä½œç¬¦ï¼ˆéƒ½åŠ ä¸Šä¸€ä¸ªç‚¹ï¼‰

```txt
+.  -.  *.  /.  %.
>.  <.  >=.  <=.
```

### å­—ç¬¦ä¸²

éœ‘ï¼š

- ä½¿ç”¨åŒå¼•å·æ‹¬èµ·æ¥
- ç”¨ UTF-8 ç¼–ç ï¼Œæ”¯æŒä»»ä½•åˆæ³•çš„ Unicode å­—ç¬¦

â‘  å…è®¸å¹¶ä¿ç•™æ¢è¡Œ

```gleam
let a = 
    "ä½ å¥½ï¼Œ
    ä¸–ç•Œï¼
    "
// "ä½ å¥½ï¼Œ\n        ä¸–ç•Œï¼\n        "
io.debug(a)
```

â‘¡ æ‹¼æ¥å­—ç¬¦ä¸²

```gleam
"hello" <> "world"
```

## åˆ—è¡¨å’Œå…ƒç»„

### åˆ—è¡¨

åˆ—è¡¨æ˜¯åŒè´¨ã€æœ‰åºçš„æ•°æ®é›†åˆã€‚

éœ‘ï¼š

- æ·»åŠ æˆ–ç§»é™¤ä¸€ä¸ªå…ƒç´ åˆ°ç¬¬ä¸€ä¸ªä½ç½®ï¼Œå¼€é”€å°ï¼Œæ—¶é—´ä”ºå¸¸é‡
- æ·»åŠ æˆ–ç§»é™¤ä¸€ä¸ªå…ƒç´ åˆ°æœ€åä¸€ä¸ªä½ç½®ï¼Œå¼€é”€å¤§ï¼Œå› ä¸ºéœ€è¦éå†å¹¶å¤åˆ¶åˆ—è¡¨

â‘  åˆ—è¡¨åŸºæœ¬å½¢å¼

```gleam
// List(Int)
let a = [-1, -2, -3]
```

â‘¡ å¸¸è§å‡½æ•°ï¼Œéœ€è¦å¯¼å…¥ `gleam/list` æ¨¡å—

| å‡½æ•°        | è¯´æ˜                     |
| ----------- | ------------------------ |
| `length()`  | è¿”å›åˆ—è¡¨é•¿åº¦ï¼Œå³å…ƒç´ ä¸ªæ•° |
| `at()`      | è¿”å›ç´¢å¼•ä½ç½®çš„å…ƒç´        |
| `prepend()` | æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°ç¬¬ä¸€ä¸ªä½ç½® |

```gleam
// 3
io.debug(list.length(a))
// Ok(-1)
io.debug(list.at(a, 0))
// [0, -1, -2, -3]
io.debug(list.prepend(a, 0))
```

â‘¢ å±•å¼€åˆ—è¡¨ï¼Œå¹¶æ”¾ç½®åˆ°å…¶ä»–åˆ—è¡¨ä¸­

```gleam
// [10, 20, -1, -2, -3]
[10, 20, ..a]
```

### å…ƒç»„

å…ƒç»„æ˜¯ä¸€ç»„æ•°æ®ï¼Œç±»å‹æº˜ä¸ç›¸åŒã€‚

â‘  å…ƒç»„åŸºæœ¬å½¢å¼

```gleam
// #(Bool, String, Int, Float)
let a = #(False, "Gleam", 9, -1.9)
```

â‘¡ è®¿é—®å…ƒç´ 

```gleam
// 9
io.debug(a.2)
```

## æ¨¡å¼åŒ¹é…

éœ‘ `case` æ˜¯ä¸€ç§æ¨¡å¼åŒ¹é…ï¼š

- æ˜¯è¡¨è¾¾å¼ï¼Œæ•´ä½“ä¼šè¿”å›ä¸€ä¸ªå€¼
- éœ€è¦åŒ¹é…ï¼ˆè€ƒè™‘æˆ–è¦†ç›–ï¼‰åˆ°æ‰€æœ‰å¯èƒ½çš„æƒ…å†µ

â‘  è§£æ„å‡ºå¯¹åº”ä½ç½®çš„å€¼ï¼Œå¹¶ç»‘å®šåˆ°ä¸€ä¸ªå˜é‡

ç®€å•è§£æ„å¹¶ç»‘å®šï¼š

```gleam
case random_number {
    0 -> "0"
    x -> int.to_string(x)
}
```

æ·±åº¦è§£æ„å¹¶ç»‘å®šï¼š

```gleam
case lisp {
    [10, x, 30] -> int.to_string(x)
    _ -> "nil"
}
```

â‘¡ ä½¿ç”¨ `..` è¡¨ç¤ºå¿½ç•¥ï¼Œä¸è¦ç›´æ¥æ”¾åœ¨åŒ¹é…è‡‚çš„å¤–é¢ï¼Œå¹¶ä¸”å¿…é¡»å¤„äºæœ€åä½ç½®

```gleam
case lisp {
    [10, ..] -> True
    _ -> False
}
```

â‘¢ ä½¿ç”¨ `,` åŒ¹é…å¤šä¸ªå€¼

```gleam
case x, y {
    1, 3 -> 4
    2, _ -> 2
    _, _ -> 0
}
```

â‘£ ä½¿ç”¨ `|` è¡¨ç¤ºæˆ–è€…

ç®€å•ä½¿ç”¨ï¼š

```gleam
case random_number {
    1 | 3 | 5 | 7 | 9 -> "å¥‡æ•°"
    _ -> "å¶æ•°"
}
```

ä»¥ `A | B | C` ä”ºä¾‹ï¼Œå¦‚æœ `A` åŒ¹é…ä¸­ç»‘å®šä¸€ä¸ªå˜é‡ `x`ï¼Œåˆ™ `B` å’Œ `C` åŒ¹é…ä¸­å¿…é¡»ä¹Ÿç»‘å®šå˜é‡ `x` å¹¶ä¸”ç±»å‹ç›¸åŒï¼š

```gleam
case lisp {
    // å˜é‡ `x` å‡ºç°åœ¨æ¯ä¸€ä¸ªâ€œæˆ–è€…â€ä¸­ï¼Œä¸”ç±»å‹éƒ½æ˜¯ `Int`
    [-1, x, ..] | [x, -2, -3] | [1, 2, x] -> x
    other -> list.length(other)
}
```

### åŒ¹é…å‘½å

ä½¿ç”¨ `as` å¯¹åŒ¹é…åˆ°çš„ä¸œè¥¿è®¾ç½®åå­—ã€‚

```gleam
case lisp {
    [10, ..] as x -> list.length(x)
    _ -> 0
}
```

### åŒ¹é…å®ˆå«

åŒ¹é…è‡‚å¸¦æœ‰ `if` å¼•å¯¼çš„æ¡ä»¶ï¼Œæ»¡è¶³æ¡ä»¶æ‰ç®—åŒ¹é…ã€‚

```gleam
case lisp {
    [-1, a, b] if a > 0 && b < -1 -> a * b
    _ -> 0
}
```

### ç»‘å®šåŒ¹é…

éœ‘ `let` ç»‘å®šæ”¯æŒæ¨¡å¼åŒ¹é…ã€‚

```gleam
let z = [-1, -2, -3]
let [z1, z2, z3] = z
let [z4, ..] = z
```

> æ³¨æ„ï¼šç»‘å®šåŒ¹é…å±äºæ¨¡å¼åŒ¹é…ï¼Œä¸æ˜¯è§£æ„èµ‹å€¼ï¼ˆä¾‹æŒ JavaScript ä¸­çš„è¯­æ³•ï¼‰ï¼Œæ‰€ä»¥ `=` ä¸¤è¾¹çš„ç»“æ„å¿…é¡»å®Œå…¨åŒ¹é…ï¼Œè€Œä¸æ˜¯å·¦è¾¹åªåŒ¹é…å³è¾¹çš„å±€éƒ¨ã€‚

### å­—ç¬¦ä¸²æ‹¼æ¥åŒ¹é…

å­—ç¬¦ä¸²æ‹¼æ¥åŒ¹é…ï¼Œç›¸å½“äºåŒ¹é…å¸¦æœ‰å‰ç¼€çš„å­—ç¬¦ä¸²ã€‚

```gleam
let z = "Hello, Gleam!"
let result = case z {
    // æ­¤åŒ¹é…è‡‚ä¸ä¼šåŒ¹é… "Bye, Gleam!"
    "Hello, " <> object -> object
    _ -> ""
}
// Gleam!
io.println(result)
```

## å‡½æ•°

å‡½æ•°æ˜¯ç¬¬ä¸€å…¬æ°‘ï¼Œä¸å˜é‡ä¸€æ ·ï¼Œæº˜ä½œä”ºå‚æ•°ä¼ é€’ç­‰ï¼Œå¹¶ä¸”å‡½æ•°ä¸å¯é‡è½½ã€‚

â‘  å£°æ˜å’Œè°ƒç”¨

```gleam
fn cunction(x: Int) -> Int {
    x * 2
}

cunction(3)
```

â‘¡ ç±»å‹æ³¨è§£

```gleam
fn with_fun1(f: fn(Int) -> Int) -> Nil {}
fn with_fun2(f: fn(Float, Bool) -> String) -> Nil {}
```

> æç¤ºï¼šå…¬å…±å‡½æ•°è°ƒç”¨å¦å¤–ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™å¦å¤–ä¸€ä¸ªå‡½æ•°ä¹Ÿå¿…é¡»æ˜¯å…¬å…±çš„ï¼Œå³åŠ ä¸Š `pub` ãªã€‚

### æ ‡ç­¾å‚æ•°

â‘  æ ‡ç­¾å‚æ•°å¿…é¡»å‡ºç°åœ¨æ— æ ‡ç­¾å‚æ•°åé¢

```gleam
fn do_something(
    f: fn(Int) -> Int,
    str s: String,
    count n: Int,
) ->  String {}
```

â‘¡ ä½¿ç”¨æ ‡ç­¾èµ‰ä¼ é€’å‚æ•°ï¼Œæº˜ä¸æŒ‰é¡ºåºä¼ é€’ï¼Œä¹Ÿæº˜æ­£å¸¸é¡ºåºä¼ é€’

```gleam
do_something(cunction, count: 3, str: "hello")
```

â‘¢ åŒ¿åå‡½æ•°ä¸æ”¯æŒæ ‡ç­¾å‚æ•°

### åŒ¿åå‡½æ•°

åŒ¿åå‡½æ•°é€šå¸¸ä¸å†™ç±»å‹æ³¨è§£ã€‚

```gleam
let phunction = fn(x, y) { x % y }
```

### æ³›å‹å‡½æ•°

éœ‘ï¼š

- ç±»å‹å‚æ•°å¿…é¡»å°å†™ï¼Œé€šå¸¸æ˜¯å•ä¸ªå­—æ¯ï¼ŒæŒ `a` æ½¡ `b` ç±»ä¼¼å…¶ä»–è¯­è¨€çš„ `T` æ½¡ `U`
- ä¸éœ€è¦å°–æ‹¬å·ï¼ˆ`<>`ï¼‰

```gleam
fn phunction(x: a, y: b, z: Bool) -> Result(a, b)

// fn(Int, Float, Bool) -> Result(Int, Float)
let _ = phunction(2, 4.6, False)
// fn(#(Bool, String), List(Int), Bool) -> Result(#(Bool, String), List(Int))
let _ = phunction(#(True, "Gleam"), [1, 2, 3], True)
```

### ç®¡é“æ“ä½œç¬¦

ç®¡é“æ“ä½œç¬¦é¿å…äº†å¤§é‡åµŒå¥—çš„æ‹¬å·ï¼Œé»˜è®¤ï¼ŒæŠŠä¸Šä¸€ä¸ªå‡½æ•°çš„ç»“æœä½œä”ºä¸‹ä¸€ä¸ªå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚

```gleam
// f3(f2(f1(3), 2), 4, 2)
10 |> f1 |> f2(2) |> f3(4, 2)
```

> æç¤ºï¼šç®¡é“æ“ä½œç¬¦é¦–å…ˆå°è¯•å°†å·¦è¾¹çš„å€¼ä½œä”ºå³è¾¹çš„ç¬¬ä¸€ä¸ªå‚æ•°ã¤²ä¼ é€’ï¼Œå³ `a |> b(1, 2)` ç­‰åŒ `b(a, 1, 2)`ã€‚å¦‚æœä¸èƒ½ä½œä”ºç¬¬ä¸€ä¸ªå‚æ•°ã¤²ä¼ é€’ï¼Œå³å‡½æ•° `b` åªæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œåˆ™ç­‰åŒ `b(1, 2)(a)` ãªã€‚

### å‡½æ•°æ•è·

å‚æ•°èµ·åä”ºä¸‹åˆ’çº¿ï¼ˆ`_`ï¼‰ï¼Œè¡¨ç¤ºé¢„ç•™ä¸€ä¸ªä½ç½®ï¼ŒæŒ‡ç¤ºè°ƒç”¨å‡½æ•°æ—¶ï¼Œå®å‚åº”è¯¥ä¼ é€’åˆ°å“ªä¸ªä½ç½®ã€‚

```gleam
let partial_add = add(9, _, 2)
let result = partial_add(3)

// ç­‰åŒ
let result = add(9, 3, 2)
```

å‡½æ•°æ•è·åœ¨ç®¡é“æ“ä½œç¬¦ä¸­çš„åº”ç”¨ã€‚

```gleam
// f2(4.7, f1(2.2, 8.1, 4.6), 9.5)
4.6 |> f1(2.2, 8.1, _) |> f2(4.7, _, 9.5)
```

## æ¨¡å—

ä¸€ã€æ¨¡å—ä¸æ–‡ä»¶

â‘  æ¨¡å—ä¸æ–‡ä»¶è·¯å¾„æ˜¯å¯¹åº”çš„

```txt
æ–‡ä»¶è·¯å¾„ï¼šsrc/nasa/rocket_ship.gleam
æ¨¡å—ï¼šnasa/rocket_ship
```

äºŒã€å¯¼å‡ºå’Œå¯¼å…¥

â‘  ä½¿ç”¨ `pub` æ ‡è®°çš„ç‰©å“æ‰èƒ½è¢«å…¶ä»–æ¨¡å—ä½¿ç”¨

â‘¡ å¯¼å…¥æ¨¡å—ï¼Œæ¨¡å—åå³ä”ºæœ€åä¸€ä¸ªä¸œè¥¿çš„åå­—

```gleam
import nasa/rocket_ship
rocket_ship.launch()
```

â‘¢ ç»™å¯¼å…¥çš„ä¸œè¥¿èµ·åˆ«å

```gleam
import nasa/rocket_ship as rosh
rosh.launch()
```

â‘£ å¯¼å…¥æ¨¡å—é‡Œé¢çš„ç±»å‹ã€å€¼ç­‰

```gleam
import animal/cat.{Cat, my_cute_cat}

// Good
Cat(my_cute_cat, 2)
// Bad
cat.Cat(cat.my_cute_cat, 2)
```

ä¸‰ã€åºæ›²å¯¼å…¥

åºæ›²å¯¼å…¥æ˜¯æ¯ä¸ª Gleam æ–‡ä»¶é»˜è®¤å¯¼å…¥çš„æ¨¡å—ï¼ŒåŒ…å«ï¼š

```txt
// ç±»å‹
BitString, Bool, Float, Int, List(element), Nil, Result(value, error), String, UtfCodepoint
// å€¼
Error, False, Nil, Ok, True
```

å…è®¸è¦†ç›–åºæ›²å¯¼å…¥çš„æ¨¡å—ï¼Œå¹¶ä¸”æº˜åŒæ—¶ä½¿ç”¨å®ƒä»¬ï¼š

```gleam
import gleam

pub type Result {
    Okkay
}

// è‡ªå®šä¹‰çš„ `Result`
pub fn f1() -> Result {}
// è¯­è¨€å†…å»ºçš„ `Result`
pub fn f2() -> gleam.Result(Int, Nil) {}
```

## è‡ªå®šä¹‰ç±»å‹

è‡ªå®šä¹‰ç±»å‹æ˜¯é”®å’Œå€¼çš„å…·åé›†åˆï¼Œç±»ä¼¼å…¶ä»–è¯­è¨€çš„å¯¹è±¡ï¼Œä½†æ˜¯æ²¡æœ‰æ–¹æ³•ã€‚

### æ„é€ å™¨ï¼ˆå˜ä½“ï¼‰

è‡ªå®šä¹‰ç±»å‹æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæ„é€ å™¨ï¼Œä¹Ÿç§°ä”ºå˜ä½“ã€‚

åªæœ‰ä¸€ä¸ªæ„é€ å™¨æ—¶ï¼Œæº˜ä½¿ç”¨ `.` è®¿é—®è®°å½•çš„å­—æ®µ

```gleam
type Single {
    Sole(x: Int, y: Int, z: Int)
}

Sole.x
```

ä¸€ã€æ— è®°å½•

```gleam
type User {
    Admin
    Guest
}

// ä¸è¦ User.Admin
let a: User = Admin
```

äºŒã€æœ‰è®°å½•ï¼Œè®°å½•ç”±å­—æ®µå’Œå¯¹åº”çš„å€¼ç»„æˆ

â‘  åªæœ‰ä¸€ä¸ªå­—æ®µï¼Œä¸éœ€è¦åå­—ï¼Œåªå†™ç±»å‹

```gleam
type Cat {
    Kat(String)
}

let a: Cat = Kat("Katty")
```

â‘¡ å¤šä¸ªå­—æ®µ

```gleam
type Cat {
    Kat(name: String, age: Int)
}

let a: Cat = Kat("Biffy", 4)
let b: Cat = Kat(age: 3, name: "Ginny")
```

â‘¢ ä½¿ç”¨ `..` å±•å¼€è®°å½•ï¼Œåé¢æ›´æ–°å­—æ®µçš„å€¼ï¼Œä¸æ”¹å˜åŸæ¥çš„è®°å½•ï¼Œè€Œæ˜¯ç»“åˆåŸæœ¬çš„è®°å½•ä¸æ–°çš„å€¼ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„è®°å½•

```gleam
Kat(..cat1, age: cat1.age + 1)
```

### åŒ¹é…è‡ªå®šä¹‰ç±»å‹

éœ‘ã€‚

```gleam
type User {
    LoggedIn(name: String)
    Guest
}

type X {
    Xyle(x: Int, y: Int, z: Int, o: Int)
}
```

â‘  æ¨¡å¼åŒ¹é…

```gleam
case usr {
    LoggedIn(name) -> io.println(name)
    Guest -> io.println("Guest")
}
```

â‘¡ ç»‘å®šåŒ¹é…ï¼ŒåŒ¹é…å¹¶é‡å‘½åå­—æ®µ

```gleam
let Cat(name, age: renamed_age) = cat2
```

â‘¢ è·³è¿‡ `_`ï¼Œå¿½ç•¥ `..`

```gleam
let Xyle(_, y, ..) = Xyle(1, 2, 3, 4)
```

### ç±»å‹åˆ«å

è‡ªå®šä¹‰ç±»å‹å’Œç±»å‹åˆ«åéƒ½ä½¿ç”¨ `type` å…³é”®å­—å®šä¹‰ï¼ŒåŒºåˆ«æ˜¯å‰è€…ä½¿ç”¨ `{}` å®šä¹‰å†…å®¹ï¼Œåè€…ä½¿ç”¨ `=` å®šä¹‰å†…å®¹ã€‚

```gleam
type SomeAlias = #(Int, Float)
```

### æ³›å‹

æ³›å‹ï¼Œåœ¨è‡ªå®šä¹‰ç±»å‹åå­—åé¢ï¼ŒåŠ ä¸Šåœ†æ‹¬å·ï¼Œé‡Œé¢å°±æ˜¯ç±»å‹å‚æ•°ã€‚

```gleam
type Lair(a, b) {
    Lairl(left: a, right: b, medium: List(b))
    Lairy(Result(a, b))
}
```

### ä¸é€æ˜ç±»å‹

ä¸é€æ˜ç±»å‹ï¼Œè®©å…¶ä»–æ¨¡å—ä¸èƒ½è®¿é—®å’Œä¿®æ”¹è¯¥ç±»å‹ï¼Œåªèƒ½é€šè¿‡å…¬å…±çš„å‡½æ•°é—´æ¥è®¿é—®æˆ–è€…ä¿®æ”¹ã€‚

```gleam
// src/opa/counter.gleam
pub opaque type Counter {
  Counter(value: Int)
}

pub fn new() {
  Counter(0)
}

pub fn increment(counter: Counter) {
  Counter(counter.value + 1)
}

pub fn get_value(counter: Counter) {
  counter.value
}
```

```gleam
import gleam/io
import opa/counter

pub fn main() {
  let c = counter.new()

  // io.debug(c.value) å‡ºé”™ï¼Œæ— æ³•è®¿é—®
  // åº”è¯¥
  io.debug(counter.get_value(c))

  // ä¿®æ”¹
  let c = counter.increment(c)
  io.debug(counter.get_value(c))
}
```

> æ³¨æ„ï¼š`pub opaque type` è™½ç„¶çœ‹ä¸Šå»åç›´è§‰ï¼Œä½†è¿™æ˜¯å¿…é¡»çš„ï¼Œæ²¡æœ‰ `opaque type` è¿™ç§å†™æ³•ã€‚

## Result å’Œ Option

### Result

éœ‘ Gleam æ²¡æœ‰ `null` å’Œå¼‚å¸¸ï¼Œè€Œæ˜¯ä½¿ç”¨ `Result(value, reason)` ç±»å‹ä»£è¡¨å¯èƒ½ç¼ºå¤±æˆ–å‡ºé”™çš„ç»“æœï¼š

- `Ok(value)` æ„é€ å™¨ï¼ˆå˜ä½“ï¼‰ä»£è¡¨æˆåŠŸçš„ç»“æœï¼Œå¹¶æºå¸¦ç»“æœçš„æ•°æ® `value`
- `Error(reason)` æ„é€ å™¨ï¼ˆå˜ä½“ï¼‰ä»£è¡¨é”™è¯¯çš„ç»“æœï¼Œå¹¶æºå¸¦é”™è¯¯çš„åŸå›  `reason`ï¼Œæˆ–è€… `Nil` è¡¨ç¤ºæ²¡æœ‰å€¼

â‘  ä½¿ç”¨ `case` åŒ¹é… `Result` ç±»å‹ï¼Œä»¥è·å¾—å…·ä½“çš„å€¼

```gleam
let r = case 3 > 2 {
    True -> Ok("æ˜¯çš„ï¼Œ3 å¤§äº 2ã€‚")
    False -> Error("ä¸ï¼Œ3 å°äº 2ã€‚")
}

case r {
    Ok(v) -> io.println(v)
    Error(e) -> io.println(e)
}
```

â‘¡ ä½¿ç”¨ `assert` æ–­è¨€

æ–­è¨€ `Result` ä¸€å®šæ˜¯ `Ok(value)`ï¼Œå°±ä¸ç”¨å¤„ç† `Error(reason)` çš„æƒ…å†µï¼š

```gleam
// "æ˜¯çš„ï¼Œ3 å¤§äº 2ã€‚"
let assert Ok(value) = r
```

å¦‚æœ `Result` æ˜¯ `Error(reason)`ï¼Œåˆ™æŠ¥é”™ã€‚

### Option

éœ‘ `Option` è¡¨ç¤ºä¸€ä¸ªå€¼å¯èƒ½å­˜åœ¨ï¼Œä¹Ÿå¯èƒ½ç¼ºå¤±ï¼š

- `Some(value)`ï¼Œå€¼å­˜åœ¨
- `None`ï¼Œå€¼ä¸å­˜åœ¨

> æç¤ºï¼š`Option` ä¸æ˜¯åºæ›²å¯¼å…¥ï¼Œéœ€è¦å¯¼å…¥ `gleam/option` æ¨¡å—ã€‚

```gleam
import gleam/option.{Some, None}

let r = case 3 > 2 {
    True -> Some("Yes")
    False -> None
}

case r {
    Some(v) -> io.println(v)
    None -> io.println("Nil")
}

// ä¹Ÿæ”¯æŒæ–­è¨€
let assert Some(v) = r
```

## é«˜çº§ç±»å‹

### ä½å­—ç¬¦ä¸²

ä½å­—ç¬¦ä¸² `BitString` ä»£è¡¨åŸç”Ÿ bit å­—ç¬¦ä¸²æ•°æ®ï¼Œä»¥ `<<>>` å½¢å¼è¡¨ç¤ºã€‚

ä¸€ã€åŸºæœ¬

â‘  éœ‘ `size()` è®¾ç½®æ¯ä¸ªåˆ†åŒºæ‰€å çš„ä½æ•°ï¼Œé»˜è®¤æ˜¯ 8 ä½ï¼Œå³ä¸€å­—èŠ‚ï¼Œæº˜ç®€å†™ï¼Œç›´æ¥å†™æ•°å­—

```gleam
// ä¸‹é¢éƒ½ç›¸ç­‰
// 00000011
<<3>>
<<3:size(8)>>
<<3:8>>
```

â‘¡ éœ‘ `unit()` è®¾ç½®æ€»å…±æœ‰å¤šå°‘ä¸ªåˆ†åŒºï¼Œå¿…é¡»ä¸ `size()` ç»“åˆä½¿ç”¨

```gleam
// True
// 00000 00011 == 0000000011
<<3:size(5)-unit(2)>> == <<3:size(10)>>
```

â‘¢ é€—å·åˆ†åŒº

```gleam
// True
// 1100 001 1 == 11000011
<<12:4, 1:3, 1:1>> == <<195>>
```

â‘£ éœ‘ `bit_string` å°†å¦ä¸€ä¸ª `BitString` æ”¾ç½®åˆ° `BitString` ä¸­

```gleam
let another = <<0:3, 6:4, 0:1>>
let myself = <<another:bit_string, 7:4, 3:2>>

// 000 0110 0 <> 0111 11
// å³ 00 0011 0001 1111
// å³ 00001100 <> 011111
// å³ 12:size(8) <> 31:size(6)
// å¾— //erl(<<12,31:6>>)
io.debug(myself)
```

â‘¤ éœ‘ `utf8` æ½¡ `utf16` å’Œ `utf32` å°† `String` æ”¾ç½®åˆ° `BitString` ä¸­

```gleam
// "Hello Gleam"
io.debug(<<"Hello Gleam":utf8>>)
```

â‘¥ è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„é€‰é¡¹ï¼ŒæŒ‰ç…§ `BitString` æ‰€å¤„çš„ä½ç½®ï¼ˆç­‰å·å·¦è¾¹æ˜¯åŒ¹é…ï¼Œç­‰å·å³è¾¹æ˜¯å€¼ï¼‰æº˜åˆ†ä”ºåŒ¹é…é€‰é¡¹å’Œå€¼é€‰é¡¹ä¸¤ç±»

äºŒã€å‡½æ•°ï¼Œå¯¼å…¥ `gleam/bit_string` æ¨¡å—

â‘  è½¬æ¢

éœ‘ `String` è½¬ `BitString` ãªï¼š

```gleam
bit_string.from_string("Gleam") // "Gleam"
```

éœ‘ `BitString` è½¬ `String` ãªï¼š

```gleam
bit_string.to_string(<<78>>) // "N"
```

â‘¡ å¯”åˆæ³•çš„ UTF-8 å­—ç¬¦ä¸²

```gleam
bit_string.is_utf8(<<1>>) // True
```

### æ˜ å°„

æ˜ å°„æ˜¯é”®å’Œå€¼çš„å­—å…¸ï¼š

- é”®å’Œå€¼æº˜æ˜¯ä»»ä½•ç±»å‹ï¼Œä½†æ‰€æœ‰é”®çš„ç±»å‹ä¸€è‡´ï¼Œæ‰€æœ‰å€¼çš„ç±»å‹ä¸€è‡´
- é”®ä¸èƒ½é‡å¤
- é”®æ˜¯æ— åºçš„

â‘  åˆ›å»º

ä½¿ç”¨ `from_list` ãªï¼š

```gleam
let a: Map(String, Int) = map.from_list([#("x", 10), #("y", 20)])
```

ä½¿ç”¨ `new` ãªï¼š

```gleam
let c: Map(Bool, Float) = 
    map.new()
    |> map.insert(True, 1.23)
    |> map.insert(False, -1.23)
```

â‘¡ å–å¾—å€¼

```gleam
let assert Ok(b) = map.get(a, "y")
let assert Ok(d) = map.get(c, True)
```

â‘¢ è¿­ä»£

```gleam
let a: Map(String, Int) = map.from_list([#("x", 10), #("y", 20)])
let r = map.fold(a, "åˆå§‹å€¼", fn(accumulator, key, value) {
    io.debug(key)
    io.debug(value)
    accumulator <> "-"
})
io.println(r)

// "x"
// åˆå§‹å€¼--
// 10
// "y"
// 20
```

> æ³¨æ„ï¼š`map.fold` è¿­ä»£çš„é¡ºåºæ˜¯æ— æ³•ä¿è¯çš„ã€‚

### å¥—

å¥—ä¸­çš„å…ƒç´ æ˜¯ç‹¬ä¸€æ— äºŒçš„ã€‚

```gleam
set.new()
|> set.insert(1)
|> set.insert(2)
|> set.insert(1)
|> set.to_list()
// [1, 2]
// ä¸æ˜¯ [1, 2, 1]
```

### å¯¹

å¯¹æ˜¯åªæœ‰ä¸¤ä¸ªå…ƒç´ çš„å…ƒç»„ã€‚

```gleam
// "34"
#(12, "34") |> pair.swap() |> pair.first() |> io.debug()
```

### é¡ºåº

é¡ºåºæœ‰ä¸‰ä¸ªå˜ä½“ï¼š

- `Eq`ï¼Œç­‰äº
- `Gt`ï¼Œå¤§äº
- `Lt`ï¼Œå°äº

```gleam
import gleam/order.{Order, Eq, Gt, Lt}

// Lt
let r: Order = case get_pair(4, 3) {
    #(a, b) if a > b -> Gt
    #(a, b) if a < b -> Lt
    _ -> Eq
}

order.to_int(Lt) // -1
order.to_int(Eq) // 0
order.to_int(Gt) // 1
```

### é˜Ÿåˆ—

é˜Ÿåˆ—æ˜¯æœ‰åºçš„é›†åˆï¼Œå’Œåˆ—è¡¨å¾ˆæƒ³ï¼Œä¸è¿‡ï¼š

- é˜Ÿåˆ—ï¼Œä»å‰é¢æˆ–åé¢å¢åŠ æˆ–ç§»é™¤å…ƒç´ çš„æ“ä½œï¼Œæ€§èƒ½å¥½
- å³ä½¿ä¸¤ä¸ªé˜Ÿåˆ—çš„å…ƒç´ ä¸€æ ·ï¼Œé¡ºåºä¹Ÿä¸€æ ·ï¼Œå®ƒä»¬ä¹Ÿå¯èƒ½ä¸ç›¸ç­‰ï¼ˆ`==` å¾—åˆ°æ„æƒ³ä¸åˆ°çš„ç»“æœï¼‰ï¼Œå› ä¸ºåˆ›å»ºé˜Ÿåˆ—çš„æ–¹å¼ä¸åŒï¼Œå†…éƒ¨å‘ˆç°å°±å¯èƒ½ä¸åŒ

â‘  åˆ›å»º

```gleam
let q1: Queue(Int) = queue.from_list([-1, -2, -3])
let q2 = 
        queue.new()
        |> queue.push_back(-1)
        |> queue.push_back(-2)
        |> queue.push_back(-3)

// Queue([], [-1, -2, -3])
// Queue([-3, -2, -1], [])
io.debug(q1)
io.debug(q2)
```

â‘¡ è½¬åˆ—è¡¨

```gleam
// [-1, -2, -3]
// [-1, -2, -3]
io.debug(queue.to_list(q1))
io.debug(queue.to_list(q2))
```

â‘¢ å¢ã€åˆ 

```gleam
queue.push_back(q, -4)
queue.push_front(q, 0)
queue.pop_back(q)
queue.pop_front(q)
```

â‘£ ç›¸ç­‰

```gleam
// True
queue.is_equal(q1, q2)
```

## é«˜çº§å‡½æ•°

å‡½æ•°æ¨¡å—é‡Œé¢çš„ä¸€äº›ä¸œè¥¿ã€‚

### apply

å°†å‚æ•°ä¼ é€’ç»™å‡½æ•°è°ƒç”¨ã€‚

```gleam
let f1 = fn() {
    fn(x: Int, y: Int) { x * y }
}

// 6
f1() |> function.apply2(2, 3) |> io.debug

let f2 = fn(x: Int, y: Int) {
    x * y
}

// 6
function.apply2(f2, 2, 3) |> io.debug
```

### compose

ç»„åˆå‡½æ•°ã€‚

```gleam
let f3 = fn(x: Int) -> Bool {
    case x > 0 {
        True -> True
        False -> False
    }
}

let f4 = fn(y: Bool) -> String {
    case y {
        True -> "çœŸ"
        False -> "å‡"
    }
}

// å‡
function.compose(f3, f4) |> function.apply1(-3) |> io.println
```

### curry

æŸ¯é‡ŒåŒ–ã€‚

```gleam
let f5 = fn(x: Float, y: Bool, z: String) -> Int {
    io.debug(x)
    io.debug(y)
    io.println(z)
    100
}

let f5a = function.curry3(f5) |> function.apply1(1.23)
False |> f5a |> function.apply1("A") |> io.debug
True |> f5a |> function.apply1("B") |> io.debug

let f5b = function.curry3(f5) |> function.apply1(1.23) |> function.apply1(False)
"A" |> f5b |> io.debug
"B" |> f5b |> io.debug
```

### flip

ç¿»è½¬å‚æ•°ã€‚

```gleam
let f6 = fn(x, y) { x - y }

// 4
function.flip(f6) |> function.apply2(3, 7) |> io.debug
```

### tap

ä¼ é€’å‚æ•°ç»™å‡½æ•°è°ƒç”¨ï¼Œå¹¶è¿”å›å‚æ•°ã€‚

```gleam
let f7 = fn(x: Int) { io.debug(x) }
let f8 = fn(x: Int) { x * 2 }

// 100
// 200
function.tap(100, f7) |> f8 |> io.debug
```
